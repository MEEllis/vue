webpackJsonp([18],{1511:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a(30),r=a(566),i=a(1643),n=function(e){return e&&e.__esModule?e:{default:e}}(i),u=a(331),o=a(327),s=function(e){return e.order.getOrderDetailResult||[]},d=(0,r.createSelector)([s],function(e){if(!e.Data)return!1;var t=e.Data,a="";switch(t.ProductType){case"1":a="卡密";break;case"2":a="卡密直储";break;case"4":a="在线直储";break;default:a=t.ProductType}t.ProductType=a;var l="";switch(t.TopupStatus){case"3":l="未处理";break;case"4":l="处理中";break;case"5":l="成功";break;case"6":l="失败";break;case"7":l="可疑";break;default:l=t.TopupStatus}return t.TopupStatus=l,t}),c=function(e){return e.Receive.complaintDetailResult||[]},p=(0,r.createSelector)([c],function(e){return e.Data?e.Data:{LaunchComplaintId:""}}),f=function(e){return{orderDetailResult:d(e),complaintDetailResult:p(e),operatorComplaintResult:e.Receive.operatorComplaintResult,operatorWaitcomplaintResult:e.Receive.operatorWaitcomplaintResult,isfetching:!!e.order.isfetching||!!e.Receive.isfetching}};t.default=(0,l.connect)(f,{getOrderDetail:o.getOrderDetail,complaintDetail:u.complaintDetail,operatorComplaint:u.operatorComplaint,operatorWaitcomplaint:u.operatorWaitcomplaint})(n.default),e.exports=t.default},1643:function(e,t,a){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,r,i,n=(a(67),a(60)),u=_interopRequireDefault(n),o=(a(112),a(165)),s=_interopRequireDefault(o),d=(a(563),a(320)),c=_interopRequireDefault(d),p=(a(567),a(325)),f=_interopRequireDefault(p),m=(a(78),a(77)),h=_interopRequireDefault(m),R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},v=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),b=a(0),C=_interopRequireDefault(b),y=a(4),E=_interopRequireDefault(y),g=a(31);a(1697);var S=h.default.create,D=h.default.Item,w=f.default.Group,q=c.default.Option,_=(r=l=function(e){function ServiceComplaint(e){_classCallCheck(this,ServiceComplaint);var t=_possibleConstructorReturn(this,(ServiceComplaint.__proto__||Object.getPrototypeOf(ServiceComplaint)).call(this,e));i.call(t);var a=t.props.params,l=a.cid,r=a.mode,n=a.oid;return t.state={value:"",cid:l,mode:r,oid:n,radioValue:"退款",radioLoad:!1,refresh:!1,waitload:!1,launchcomplaintId:"",detailLoad:!1,showPrice:!1,confirmDirty:!1},t}return _inherits(ServiceComplaint,e),v(ServiceComplaint,[{key:"componentWillMount",value:function(){var e=this.props;e.getOrderDetail({orderId:this.state.oid}),"1"!==this.state.mode&&(e.complaintDetail({ComplaintId:this.state.cid}),this.setState({detailLoad:!0}))}},{key:"componentWillReceiveProps",value:function(e){if(e.complaintDetailResult!==this.props.complaintDetailResult){"卡密错误或卡密不可用"===e.complaintDetailResult.Question&&this.setState({radioLoad:!0}),this.setState({LaunchComplaintId:e.complaintDetailResult.LaunchComplaintId,detailLoad:!1})}e.operatorComplaintResult&&this.state.refresh&&200===e.operatorComplaintResult.Status&&(setTimeout(function(){g.browserHistory.push("/service/receive")},1e3),this.state.refresh&&this.setState({refresh:!1})),e.operatorWaitcomplaintResult&&this.state.waitload&&200===e.operatorWaitcomplaintResult.Status&&(setTimeout(function(){g.browserHistory.push("/service/receive")},1e3),this.state.waitload&&this.setState({waitload:!1}))}},{key:"render",value:function(){var e=this.props,t=e.orderDetailResult,a=e.complaintDetailResult,l=e.params.mode;if(!t)return!1;var r=a.Question,i=a.HopeResult,n=a.ChatRoot||[],o={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},d=e.form.getFieldDecorator,p={labelCol:{span:6},wrapperCol:{span:14}};return C.default.createElement("div",{className:"showComplaintDiv"},C.default.createElement("div",{className:"showComplaintLeft"},C.default.createElement("div",{className:"showComplaintComponent-top"},C.default.createElement("p",null,C.default.createElement("label",null,"客户订单号："),t.CustomerOrderId),C.default.createElement("p",null,C.default.createElement("label",null,"卡门网订单号："),t.OrderId),C.default.createElement("p",null,C.default.createElement("label",null,"订单状态："),C.default.createElement("span",{className:"greenFont"},t.TopupStatus)),C.default.createElement("p",null,C.default.createElement("label",null,"商品名称/编号："),t.DealerSiteName,"/",t.DealerSiteId),C.default.createElement("p",null,C.default.createElement("label",null,"商品类型："),t.ProductType)),C.default.createElement("div",{className:"showComplaintComponent-body"},C.default.createElement(h.default,null,"1"===l?C.default.createElement(D,R({},p,{label:"投诉问题"}),d("Question",{initialValue:"充值成功但实际未到账或者部分到账",rules:[{required:!0,message:"请选择投诉问题"}]})(C.default.createElement(c.default,{showSearch:!0,onChange:this.handleChange},C.default.createElement(c.default.Option,{value:"充值成功但实际未到账或者部分到账"},"充值成功但实际未到账或者部分到账"),C.default.createElement(c.default.Option,{value:"卡密错误或卡密不可用"},"卡密错误或卡密不可用")))):C.default.createElement(D,R({},p,{label:"投诉问题"}),d("Question",{initialValue:r,rules:[{required:!0,message:"请选择投诉问题"}]})(C.default.createElement(c.default,{allowClear:!0,disabled:!0},C.default.createElement(c.default.Option,{value:"1"},"1")))),"退款"===i?"2"===l&&C.default.createElement(D,R({},p,{label:"是否退款"}),d("IsRefundSelect",{initialValue:"",rules:[{required:!0,message:"请选择是否退款"}]})(C.default.createElement(c.default,{onChange:this.changePrice,disabled:"0"===l},C.default.createElement(c.default.Option,{value:""},"请选择"),C.default.createElement(c.default.Option,{value:"1"},"是"),C.default.createElement(c.default.Option,{value:"2"},"否")))):"2"===l&&C.default.createElement(D,R({},p,{label:"是否退款",style:{display:"none"}}),d("IsRefundSelect",{initialValue:"2",rules:[{required:!0,message:"请选择是否退款"}]})(C.default.createElement(c.default,null,C.default.createElement(q,{value:"2"},"否")))),this.state.showPrice&&C.default.createElement("span",null,C.default.createElement(D,R({},p,{label:"金额"}),d("ReturnMoney",{initialValue:"",rules:[{required:!0,message:"请输入金额"}]})(C.default.createElement(s.default,{type:"number"}))),C.default.createElement(D,R({},p,{label:"确认金额"}),d("reReturnMoney",{initialValue:"",rules:[{required:!0,message:"请确认金额"},{validator:this.checkPrice}]})(C.default.createElement(s.default,{type:"number",onBlur:this.handlePrice})))),"1"===l?C.default.createElement(D,R({},p,{label:"希望处理结果"}),d("HopeResult",{initialValue:this.state.radioValue,rules:[{required:!0,message:"请选择处理结果"}]})(C.default.createElement(w,{onChange:this.onchangeRaio},C.default.createElement(f.default,{value:"退款"},"退款"),this.state.radioLoad?C.default.createElement(f.default,{value:"补卡"},"补卡"):C.default.createElement(f.default,{value:"补充完成"},"补充完成")))):C.default.createElement(D,R({},p,{label:"希望处理结果"}),d("HopeResult",{initialValue:i,rules:[{required:!0,message:"请选择处理结果"}]})(C.default.createElement(w,{disabled:!0},C.default.createElement(f.default,{value:"退款"},"退款"),this.state.radioLoad?C.default.createElement(f.default,{value:"补卡"},"补卡"):C.default.createElement(f.default,{value:"补充完成"},"补充完成")))),C.default.createElement(D,R({},p,{label:"内容"}),d("content",{rules:[{required:!0,whitespace:!0,message:"请输入内容"}]})(C.default.createElement(s.default,{type:"textarea",rows:4,maxLength:"250",disabled:"0"===this.state.mode&&!0}))),C.default.createElement(D,o,C.default.createElement(u.default,{type:"primary",htmlType:"submit",size:"large",disabled:"0"===this.state.mode&&!0,onClick:this.handleSubmit1},"处理"),C.default.createElement(u.default,{type:"primary",htmlType:"submit",size:"large",disabled:"0"===this.state.mode&&!0,onClick:this.handleSubmit2,style:{marginLeft:8}},"投诉待查"),C.default.createElement(u.default,{style:{marginLeft:8},onClick:this.handleReset},"返回"))))),C.default.createElement("div",{className:"showComplaintRight"},"1"!==l?C.default.createElement("div",null,n&&n.length>0&&C.default.createElement("h2",null,"投诉：",r,"    希望处理结果：",i),n&&n.length>0&&n.map(function(e,t){return C.default.createElement("div",{className:"complaintList",key:t},e&&e.length>0&&e.map(function(e,t){return C.default.createElement("div",{className:"0"==e.ComplainantType?"talk-in":"talk-out",key:t},C.default.createElement("p",{className:"1"==e.ComplainantType&&"nameTime"},"0"==e.ComplainantType?e.DealerSiteName+" ("+e.DealerSiteId+")":e.SupplierSiteName+"("+e.SupplierSiteId+")",C.default.createElement("span",{style:{marginLeft:15}},e.CreateDate)),C.default.createElement("div",{className:"0"==e.ComplainantType?"messageCon":"messageRight messageCon"},C.default.createElement("span",{className:"0"==e.ComplainantType?"talk-message talk-message-me":"talk-message talk-message-p"},e.Content)))}))})):""))}}]),ServiceComplaint}(C.default.Component),l.propTypes={operatorComplaint:E.default.func.isRequired,operatorWaitcomplaint:E.default.func.isRequired,form:E.default.shape({validateFields:E.default.func.isRequired,getFieldDecorator:E.default.func.isRequired,resetFields:E.default.func.isRequired,setFieldsValue:E.default.func.isRequired}).isRequired,params:E.default.shape({cid:E.default.string.isRequired,oid:E.default.string.isRequired,mode:E.default.string.isRequired}).isRequired,complaintDetailResult:E.default.shape({LaunchComplaintId:E.default.string.isRequired}),operatorComplaintResult:E.default.shape({Status:E.default.number.isRequired}),operatorWaitcomplaintResult:E.default.shape({Status:E.default.number.isRequired})},l.defaultProps={isfetching:!0,complaintDetailResult:void 0,operatorComplaintResult:void 0,operatorWaitcomplaintResult:void 0},i=function(){var e=this;this.handleSubmit1=function(){e.props.form.validateFields(function(t,a){if(t)return!1;e.props.operatorComplaint({LaunchComplaintId:e.state.LaunchComplaintId,Content:a.content,IsReturnMoney:a.IsRefundSelect,ReturnMoney:a.ReturnMoney,OrderNo:e.state.oid}),e.setState({refresh:!0})})},this.handleSubmit2=function(){e.props.form.validateFields(function(t,a){if(t)return!1;e.props.operatorWaitcomplaint({LaunchComplaintId:e.state.LaunchComplaintId,Content:a.content,IsReturnMoney:a.IsRefundSelect,ReturnMoney:a.ReturnMoney,OrderNo:e.state.oid}),e.setState({waitload:!0}),e.props.form.resetFields()})},this.handleChange=function(){e.setState({radioLoad:!e.state.radioLoad})},this.handleReset=function(){"1"===e.state.mode?g.browserHistory.push("/order/detail"):g.browserHistory.push("/service/receive")},this.changePrice=function(t){"1"===t?e.setState({showPrice:!0}):e.setState({showPrice:!1})},this.handlePrice=function(t){var a=t.target.value;e.setState({confirmDirty:e.state.confirmDirty||!!a})},this.checkPrice=function(t,a,l){var r=e.props.form;a&&a!==r.getFieldValue("ReturnMoney")?l("两次输入金额不一样!"):l()}},r);t.default=S()(_),e.exports=t.default},1697:function(e,t){}});